(this.webpackJsonptwttr=this.webpackJsonptwttr||[]).push([[0],{109:function(e,t,n){e.exports=n(307)},114:function(e,t,n){},137:function(e,t,n){},300:function(e,t,n){},301:function(e,t,n){},302:function(e,t,n){},303:function(e,t,n){},304:function(e,t,n){},305:function(e,t,n){},306:function(e,t,n){},307:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(39),c=n.n(o),s=n(2),u=n(7),l=(n(114),n(5)),i=n(1),f=n.n(i),p=n(4),m=n(9),d=n.n(m),g=function(){var e=Object(p.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",e.next=3,d.a.get("/api/posts").catch((function(e){return t="Error: , ".concat(e.response.data)}));case 3:return n=e.sent,e.abrupt("return",""!==t?t:n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(p.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",e.next=3,d.a.get("/api/users").catch((function(e){return t="Error: , ".concat(e.response.data)}));case 3:return n=e.sent,e.abrupt("return",""!==t?t:n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.next=3,d.a.post("/api/login",t).catch((function(e){return n="Error: ".concat(e.response.data)}));case 3:return r=e.sent,e.abrupt("return",""!==n?n:r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.next=3,d.a.post("/api/users",t).catch((function(e){return n="Error: ".concat(e.response.data)}));case 3:return r=e.sent,e.abrupt("return",""!==n?n:r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.next=3,d.a.post("/api/posts",t).catch((function(e){return n="Error: ".concat(e.response.data)}));case 3:return r=e.sent,e.abrupt("return",""!==n?n:r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.next=3,d.a.post("/api/delete",t).catch((function(e){return n="Error: ".concat(e.response.data)}));case 3:return r=e.sent,e.abrupt("return",""!==n?n:r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.next=3,d.a.post("/api/like",t).catch((function(e){return n="Error: ".concat(e.response.data)}));case 3:return r=e.sent,e.abrupt("return",""!==n?n:r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.next=3,d.a.post("/api/dislike",t).catch((function(e){return n="Error: ".concat(e.response.data)}));case 3:return r=e.sent,e.abrupt("return",""!==n?n:r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.next=3,d.a.post("/api/search",t).catch((function(e){return n="Error: ".concat(e.response.data)}));case 3:return r=e.sent,e.abrupt("return",""!==n?n:r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.next=3,d.a.post("/api/userPosts",t).catch((function(e){return n="Error: ".concat(e.response.data)}));case 3:return r=e.sent,e.abrupt("return",""!==n?n:r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.next=3,d.a.get("/api/post/".concat(t)).catch((function(e){return n="Error: ".concat(e.response.data)}));case 3:return r=e.sent,e.abrupt("return",""!==n?n:r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.next=3,d.a.post("/api/comments",t).catch((function(e){return n="Error: ".concat(e.response.data)}));case 3:return r=e.sent,e.abrupt("return",""!==n?n:r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.next=3,d.a.post("/api/deletecomment",t).catch((function(e){return n="Error: ".concat(e.response.data)}));case 3:return r=e.sent,e.abrupt("return",""!==n?n:r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(e){return function(t,n){t({type:"ADD_PROFILE",payload:e})}},_=function(e){return function(t,n){t({type:"SET_CURRENT_PAGE",currentPage:e})}},R=function(e){return function(t,n){t({type:"SET_ERROR_MESSAGE",message:e})}},N=function(e){return function(t,n){t({type:"SET_SEARCH",text:e})}},D=function(e){return function(t,n){t({type:"SET_SEARCH_RESULTS",payload:e})}},T=function(e){return e?function(){var t=Object(p.a)(f.a.mark((function t(n,r){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P(e);case 2:a=t.sent,n({type:"SET_SINGLE_POST",payload:a});case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}():function(e,t){e({type:"SET_SINGLE_POST",payload:null})}},U=Object(l.b)((function(e){return{allUsers:e.mongoDb.allUsers,reduXprofile:e.profile}}),(function(e){return{setProfile:function(t){return e(x(t))},logInRequest:function(t){return e(function(e){return function(){var t=Object(p.a)(f.a.mark((function t(n,r){var a,o,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E(e);case 2:if("string"==typeof(a=t.sent))console.log(a),n({type:"SET_ERROR_MESSAGE",message:a});else{console.log("Log in was successful"),o=r().mongoDb.allUsers;try{c=o.find((function(e){return e._id===a._id}))}catch(u){console.error(u)}localStorage.setItem("storediD",a._id),localStorage.setItem("storedToken",a.token),n({type:"ADD_PROFILE",payload:Object(s.a)(Object(s.a)({},c),{},{token:a.token})}),n({type:"SET_CURRENT_PAGE",currentPage:"posts"})}case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(t))},setCurrentPage:function(t){return e(_(t))},setErrorMessage:function(t){return e(R(t))}}}))((function(e){var t=e.setCurrentPage,n=e.setErrorMessage,o=e.logInRequest,c=Object(r.useState)(),l=Object(u.a)(c,2),i=l[0],f=l[1],p=function(e){e.preventDefault(),!i||!i.name||!i.password?n("Error: You have to fill out both fields"):(n(null),o(i))};return a.a.createElement("form",{onSubmit:p,className:"loginForm",onKeyDown:function(e){13===e.keyCode&&(e.preventDefault(),p(e))}},a.a.createElement("input",{type:"text",name:"name",placeholder:"Enter your name",onChange:function(e){return f(Object(s.a)(Object(s.a)({},i),{},{name:e.target.value.toLowerCase().trim()}))}}),a.a.createElement("input",{type:"password",name:"password",placeholder:"Enter your password",onChange:function(e){return f(Object(s.a)(Object(s.a)({},i),{},{password:e.target.value.trim()}))}}),a.a.createElement("div",{className:"btns"},a.a.createElement("button",{className:"btns",onClick:function(){n(null),t("posts")}}," Cancel "),a.a.createElement("button",{className:"btns submit",type:"submit"},"Submit")))})),A=n(40),M=n.n(A),L=(n(137),Object(l.b)((function(e){return{allPosts:e.mongoDb.allPosts,search:e.page.search}}),(function(e){return{setErrorMessage:function(t){return e(R(t))},setSearch:function(t){return e(N(t))},setSearchResults:function(t){return e(D(t))}}}))((function(e){var t=e.setErrorMessage,n=e.setSearch,o=e.search,c=e.allPosts,s=e.setSearchResults,l=Object(r.useState)(),i=Object(u.a)(l,2),m=i[0],d=i[1],g=function(){var e=Object(p.a)(f.a.mark((function e(n){var r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Searching for posts with ".concat(n," hashtag")),e.next=3,S({payload:n.toLowerCase()});case 3:"string"===typeof(r=e.sent)?(console.log(r),t(r)):(t(null),a=c.filter((function(e){for(var t=0;t<r.length;t++)if(r[t]===e._id)return e})),s(a));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){""===o?(n(null),s(null)):o&&g(o)}),[g,o,n,s]);var b=function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),console.log("search submitted ".concat(m)),n(m);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a.a.createElement("form",{onSubmit:b},a.a.createElement("input",{type:"text",name:"search",placeholder:"Search for Hashtag here",onChange:function(e){d(e.target.value)},value:m}))}))),I=n(22),X=Object(l.b)((function(e){return{allUsers:e.mongoDb.allUsers,reduXprofile:e.profile,reduXcurrentPage:e.page.currentPage}}),(function(e){return{removeProfile:function(){return e((function(e,t){e({type:"REMOVE_PROFILE"})}))},setCurrentPage:function(t){return e(_(t))},setSearch:function(t){return e(N(t))},setSearchResults:function(t){return e(D(t))},setErrorMessage:function(t){return e(R(t))}}}))((function(e){var t=e.reduXprofile,n=e.reduXcurrentPage,r=e.removeProfile,o=e.setCurrentPage,c=e.setSearch,s=e.setSearchResults,u=e.setErrorMessage,l=function(e){e.preventDefault(),c(null),s(null),u(null),o("posts")},i=a.a.createElement("div",{className:"page-logo",onClick:l}," ",a.a.createElement(I.c,null)," "),f=a.a.createElement(L,null);return!M.a.isEmpty(t)||"posts"!==n&&"single-page"!==n?"log-in"===n||"register"===n||"compose"===n?a.a.createElement(a.a.Fragment,null,"compose"!==n?i:a.a.createElement("div",{className:"profile-name compose-profile-name",onClick:l,style:{background:t.color}},t.name),a.a.createElement("div",{className:"page-label"},"log-in"===n?"Log In":n)):a.a.createElement("div",{className:"profile"},a.a.createElement("div",{className:"profile-name",onClick:l,style:{background:t.color}},t.name),a.a.createElement("button",{onClick:function(){return o("compose")}}," Compose "),a.a.createElement("button",{onClick:function(){console.log("Logged out."),r(),localStorage.removeItem("storediD"),localStorage.removeItem("storedToken"),u("You are now logged out. Hope to see you again soon."),o("posts")}}," Log Out"),f):a.a.createElement(a.a.Fragment,null,i,a.a.createElement("button",{className:"register-btn",onClick:function(){return o("register")}}," Register "),a.a.createElement("button",{className:"login-btn",onClick:function(){return o("log-in")}},"Log In "),f)})),G=n(107),F=(n(300),n(60)),H=n.n(F),q=Object(l.b)((function(e){return{allUsers:e.mongoDb.allUsers,reduXprofile:e.profile}}),(function(e){return{setProfile:function(t){return e(x(t))},registerUser:function(t){return e(function(e){return function(){var t=Object(p.a)(f.a.mark((function t(n,r){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h(e);case 2:"string"==typeof(a=t.sent)?(console.log(a),n({type:"SET_ERROR_MESSAGE",message:a})):(console.log("Registration was successful"),n({type:"ADD_PROFILE",payload:a}),n({type:"SET_CURRENT_PAGE",currentPage:"posts"}),n({type:"SET_ERROR_MESSAGE",message:""}));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(t))},setCurrentPage:function(t){return e(_(t))},setErrorMessage:function(t){return e(R(t))}}}))((function(e){var t=e.registerUser,n=e.setCurrentPage,o=e.setErrorMessage,c=Object(r.useState)({color:"#e0e0e0"}),l=Object(u.a)(c,2),i=l[0],f=l[1],p=Object(r.useRef)(),m=function(e){if(e.preventDefault(),!i||!i.name||!i.password||!i.rePassword||!i.color)o("Error: You have to fill out all fields");else{var n=i.password!==i.rePassword,r=i.name.split("").includes(" "),a=i.name.length>20,c=H()(i.color);console.log("dark?: ",c.isDark()),n?(p.current.style.backgroundColor="#FFE1E1",o("Error: Passwords do not match")):r?o("Error: Name can't have any spaces"):a?o("Error: Name can't be that long"):c.isDark()?(f(Object(s.a)(Object(s.a)({},i),{},{color:"#e0e0e0"})),o("Error: Please choose a lighter color")):(p.current.style.backgroundColor="white",t(i))}};return a.a.createElement("form",{onSubmit:m,className:"registerForm",onKeyDown:function(e){13===e.keyCode&&(e.preventDefault(),m(e))}},a.a.createElement("input",{type:"text",name:"name",placeholder:"Enter your name",onChange:function(e){return f(Object(s.a)(Object(s.a)({},i),{},{name:e.target.value.toLowerCase().trim()}))}}),a.a.createElement("input",{type:"password",name:"password",placeholder:"Enter your password",onChange:function(e){return f(Object(s.a)(Object(s.a)({},i),{},{password:e.target.value.trim()}))}}),a.a.createElement("input",{type:"password",name:"rePassword",ref:p,placeholder:"Re-enter your password",onChange:function(e){return f(Object(s.a)(Object(s.a)({},i),{},{rePassword:e.target.value.trim()}))}}),a.a.createElement("div",{className:"color-btns",style:{background:i.color}},a.a.createElement("div",{className:"color-btns-label"},a.a.createElement("p",null," Choose a color: ")),a.a.createElement("div",{className:"color-btns-choices"},a.a.createElement(G.TwitterPicker,{triangle:"hide",color:i.color,onChange:function(e,t){f(Object(s.a)(Object(s.a)({},i),{},{color:e.hex}))}}))),a.a.createElement("div",{className:"btns"},a.a.createElement("button",{onClick:function(){n("posts"),o(null)}}," Cancel "),a.a.createElement("button",{className:"btns submit",type:"submit"},"Submit")))})),K=Object(l.b)((function(e){return{singlePost:e.page.singlePost,profile:e.profile,allUsers:e.mongoDb.allUsers}}),(function(e){return{setSearch:function(t){return e(N(t))},setSinglePost:function(t){return e(T(t))}}}))((function(e){var t=e.singlePost,n=e.allUsers,r=e.profile,o=e.setSinglePost,c=function(){var e=Object(p.a)(f.a.mark((function e(n){var a,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={token:r.token,postId:t._id,commentId:n},e.next=3,C(a);case 3:if("OK"===(c=e.sent)){e.next=8;break}console.log(c),e.next=11;break;case 8:return console.log("Comment was added."),e.next=11,o(t._id);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return t.comments.map((function(e){var t="";if(n)try{t=n.find((function(t){return t._id===e.authorId}))}catch(s){console.error(s)}var o=e.message.split(/\s+/).map((function(e){return e.startsWith("#")?a.a.createElement("button",{className:"hashtag",style:{cursor:"auto"}},"".concat(e," ")):e+" "}));return a.a.createElement("div",{className:"single-comment",style:{borderRight:"10px solid ".concat(t.color)}},a.a.createElement("div",null,a.a.createElement("span",null," ","".concat(t.name,": ")," "),o),r&&e.authorId===r._id?a.a.createElement("button",{className:"delete-comment",onClick:function(t){t.preventDefault(),c(e._id)}}," Delete "):"")}))})),W=function(){return function(){var e=Object(p.a)(f.a.mark((function e(t,n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g();case 3:r=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:"string"===typeof r?(console.log(r),t({type:"UPDATE_ALL_POSTS",payload:[]}),t({type:"SET_ERROR_MESSAGE",message:r})):t({type:"UPDATE_ALL_POSTS",payload:r});case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()},B=Object(l.b)((function(e){return{allUsers:e.mongoDb.allUsers,reduXprofile:e.profile,currentPage:e.page.currentPage}}),(function(e){return{updateAllPosts:function(){return e(W())},addLikeRequest:function(t){return e(function(e){return function(){var t=Object(p.a)(f.a.mark((function t(n,r){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k(e);case 2:"OK"!==(a=t.sent)?(console.log(a),n({type:"SET_ERROR_MESSAGE",message:a})):console.log("Like was added.");case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(t))},removeLikeRequest:function(t){return e(function(e){return function(){var t=Object(p.a)(f.a.mark((function t(n,r){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O(e);case 2:"OK"!==(a=t.sent)?(console.log(a),n({type:"SET_ERROR_MESSAGE",message:a})):console.log("Like was removed.");case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(t))},setSinglePost:function(t){return e(T(t))},setErrorMessage:function(t){return e(R(t))}}}))((function(e){var t=e.reduXprofile,n=e.updateAllPosts,r=e.currentPage,o=e.setSinglePost,c=e.post,s=e.addLikeRequest,u=e.removeLikeRequest,l=e.setErrorMessage,i={},m=t&&c.authorId!==t._id&&!c.likes.includes(t._id),d=t&&c.authorId!==t._id&&c.likes.includes(t._id);return m?i={color:"black",cursor:"pointer",opacity:1}:d&&(i={color:"red",cursor:"pointer",opacity:1}),a.a.createElement("button",{className:"like",onClick:function(){var e=Object(p.a)(f.a.mark((function e(a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}l("Please Register or Log In to be able to get the full experience"),e.next=12;break;case 4:if(!m){e.next=9;break}return e.next=7,s({token:t.token,_id:c._id});case 7:e.next=12;break;case 9:if(!d){e.next=12;break}return e.next=12,u({token:t.token,_id:c._id});case 12:if("posts"!==r){e.next=17;break}return e.next=15,n();case 15:e.next=20;break;case 17:if("single-page"!==r){e.next=20;break}return e.next=20,o(c._id);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),style:i},a.a.createElement("label",null,c.likes.length),a.a.createElement(I.b,{className:"heart"}))})),J=Object(l.b)((function(e){return{allUsers:e.mongoDb.allUsers,reduXprofile:e.profile}}),(function(e){return{updateAllPosts:function(){return e(W())},deletePostRequest:function(t){return e(function(e){return function(){var t=Object(p.a)(f.a.mark((function t(n,r){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y(e);case 2:"OK"!==(a=t.sent)?console.log(a):(console.log("Post was successfully deleted."),n({type:"SET_CURRENT_PAGE",currentPage:"posts"}));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(t))},setCurrentPage:function(t){return e(_(t))}}}))((function(e){var t=e.reduXprofile,n=e.updateAllPosts,r=e.deletePostRequest,o=e.post,c=function(){var e=Object(p.a)(f.a.mark((function e(a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,r({token:t.token,_id:o._id});case 3:n();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a.a.createElement("button",{className:"delete",onClick:c},"Delete")})),Y=function(e){var t=new Date(e),n="".concat(["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()]," ").concat(t.getDate(),", ").concat(t.getFullYear()),r=t.getHours()>12?t.getHours()-12:t.getHours(),a=(t.getMinutes()<10?"0":"")+t.getMinutes(),o=t.getHours()>=12?"pm":"am";return"".concat(n," | ").concat(r,":").concat(a," ").concat(o)},V=Object(l.b)((function(e){return{allPosts:e.mongoDb.allPosts,allUsers:e.mongoDb.allUsers,reduXprofile:e.profile,currentPage:e.page.currentPage}}),(function(e){return{setSearch:function(t){return e(N(t))},getUserPosts:function(t){return e(function(e){return function(){var t=Object(p.a)(f.a.mark((function t(n,r){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w({authorId:e});case 2:"string"===typeof(a=t.sent)?(console.log(a),n({type:"SET_ERROR_MESSAGE",message:a})):(console.log("User's Posts were retreived."),n({type:"SET_SEARCH_RESULTS",payload:a}));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(t))},setCurrentPage:function(t){return e(_(t))},updateAllPosts:function(){return e(W())},setSinglePost:function(t){return e(T(t))}}}))((function(e){var t,n=e.setSearch,r=e.allUsers,o=e.reduXprofile,c=e.setCurrentPage,s=e.setSinglePost,u=e.currentPage,l=e.getUserPosts,i=e.post;if(r&&i)try{var m=r.filter((function(e){return e._id===i.authorId}));t=m[0]}catch(b){console.log(b)}t||(t={name:"User no longer exists",color:"red"});var d=function(){var e=Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(i._id);case 2:c("single-page");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(e){c("posts"),s(null),n(e)};return a.a.createElement("li",{className:"post"},a.a.createElement("div",{className:"post-header"},a.a.createElement("div",{className:"info-name",onClick:function(){l(t._id),n(null),"posts"!==u&&c("posts")}},a.a.createElement("div",{className:"icon-color",style:{background:t.color}}),a.a.createElement("h3",null,t.name)),a.a.createElement("div",{className:"like-comment-icons"},"posts"===u?a.a.createElement("el",{onClick:d,className:"comments"},a.a.createElement("label",null," ",i.comments?i.comments.length:0," "),a.a.createElement(I.a,{className:"commentbox"})):"",a.a.createElement(B,{post:i}))),a.a.createElement("div",{className:"post-body"},a.a.createElement("p",{className:"text"},function(e,t){return a.a.createElement(a.a.Fragment,null,e.split(/\s+/).map((function(e){if(e.startsWith("#"))return a.a.createElement("button",{onClick:function(){return g(e)},className:"hashtag"},"".concat(e," "));if(e.startsWith("@")){var n;try{n=t.find((function(t){return t.name===e.toLowerCase().substring(1)}))}catch(o){console.log(o)}var r={};return n&&(r={background:n.color,color:"black"}),a.a.createElement("button",{style:r,className:"hashtag",onClick:function(){l(n._id),"posts"!==u&&c("posts")}},"".concat(e," "))}return e+" "})))}(i.payload,r))),a.a.createElement("div",{className:"post-footer"},a.a.createElement("div",{className:"date-comments"},a.a.createElement("p",{className:"date"},Y(i.date))),o&&o._id===i.authorId?a.a.createElement(J,{post:i}):""))})),z=(n(301),Object(l.b)((function(e){return{singlePost:e.page.singlePost,profile:e.profile,allUsers:e.mongoDb.allUsers}}),(function(e){return{setSearch:function(t){return e(N(t))},setSearchResults:function(t){return e(D(t))},setSinglePost:function(t){return e(T(t))},setCurrentPage:function(t){return e(_(t))}}}))((function(e){var t=Object(r.useState)(),n=Object(u.a)(t,2),o=n[0],c=n[1],s=e.singlePost,l=e.profile,i=e.allUsers,m=e.setSinglePost,d=e.setCurrentPage,g=e.setSearch,b=e.setSearchResults,E=function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={token:l.token,_id:s._id,message:o.trim()},e.next=4,j(n);case 4:if("OK"===(r=e.sent)){e.next=9;break}console.log(r),e.next=13;break;case 9:return console.log("Comment was added."),c(""),e.next=13,m(s._id);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a.a.createElement("div",null,a.a.createElement("div",{className:"clear-page",onClick:function(){g(null),b(null),d("posts")}},"Back to All Posts"),a.a.createElement(V,{post:s}),a.a.createElement("div",{className:"comments-page"},a.a.createElement("div",{className:"comments-loop"},a.a.createElement(K,{singlePost:s,allUsers:i,profile:l})),l?a.a.createElement("form",{onSubmit:E},a.a.createElement("input",{type:"text",name:"comment",className:"comment-input",value:o,placeholder:"Enter your comment here",onChange:function(e){return c(e.target.value)}})):""))}))),$=(n(302),n(303),n(304),Object(l.b)((function(e){return{allPosts:e.mongoDb.allPosts,searchResults:e.page.searchResults,searchText:e.page.search}}),(function(e){return{setSearchResults:function(t){return e(D(t))},setSearch:function(t){return e(N(t))}}}))((function(e){var t=e.allPosts,n=e.searchResults,r=e.setSearchResults,o=e.setSearch,c=e.searchText,s=e.addPost,u=t;return n&&(u=n),M.a.isEmpty(u)||"string"===typeof u?a.a.createElement("div",{className:"emptyPosts"},a.a.createElement("p",null,"Unfortunately there are no posts")):a.a.createElement("ul",null,n?a.a.createElement("div",{className:"clear-page",onClick:function(){o(null),r(null)}},c?"Clear Search for ".concat(c):"Back to All Posts"):"",u.slice(0).reverse().map((function(e){return a.a.createElement(V,Object.assign({key:e._id},{post:e,addPost:s}))})))}))),Q=(n(305),Object(l.b)((function(e){return{allUsers:e.mongoDb.allUsers}}))((function(e){var t=e.setCompose,n=e.setSuggested,o=e.allUsers,c=Object(r.useState)(!1),s=Object(u.a)(c,2),l=s[0],i=s[1],f=Object(r.useState)(!1),p=Object(u.a)(f,2),m=p[0],d=p[1],g=Object(r.useState)(null),b=Object(u.a)(g,2),E=b[0],h=b[1],v=Object(r.useState)(null),y=Object(u.a)(v,2),k=y[0],O=y[1],S=Object(r.useRef)();Object(r.useEffect)((function(){if(E){document.designMode="on";for(var e=0;e<=E.length+1;e++)document.execCommand("delete",!1,"");document.execCommand("insertHTML",!1,"<a href='/' class='hashtag'>#".concat(E,"</a>")),document.execCommand("insertText",!1," "),document.designMode="off",setTimeout((function(){S.current.focus()}),0),h(""),i(!1)}}),[E]),Object(r.useEffect)((function(){if(k){document.designMode="on";for(var e=0;e<=k.length+1;e++)document.execCommand("delete",!1,"");var t=o.filter((function(e){return e.name===k})),n=t[0],r=t.length>0?"background:".concat(n.color):"";document.execCommand("insertHTML",!1,"<a href='/' class='mention' style=".concat(r,">@").concat(k,"</a>")),document.execCommand("insertText",!1," "),document.designMode="off",setTimeout((function(){S.current.focus()}),0),O(null),d(!1)}}),[o,k]);var w=Object(r.useState)(""),P=Object(u.a)(w,2),j=P[0],C=P[1];Object(r.useEffect)((function(){if(m&&j.length>0&&o){var e=o.filter((function(e){return e.name.startsWith(j)}));console.log(e),n(e)}else n(null)}),[o,j,m,n]);return a.a.createElement("div",{contentEditable:"true",ref:S,class:"highlighted-compose-textArea",placeholder:"type something here...",onKeyUp:function(e){if(51===e.keyCode)i(!0);else if(l&&8===e.keyCode&&E&&1===E.length)i(!1),h(null),n(null),C("");else if(l&&e.key.match(/\s+/))h(j),n(null),C("");else if(l)if(8===e.keyCode)C(j.slice(0,-1));else{var r=e.key.toLowerCase();r.match(/[a-z]/i)&&16!==e.keyCode&&16!==e.keyCode&&91!==e.keyCode&&37!==e.keyCode&&38!==e.keyCode&&39!==e.keyCode&&40!==e.keyCode?C(j+r):16===e.keyCode||37===e.keyCode||38===e.keyCode||39===e.keyCode||40===e.keyCode||(d(!1),n(null),C(""),h(null))}if(50===e.keyCode)d(!0);else if(m&&8===e.keyCode&&k&&1===k.length)d(!1),O(null),n(null),C("");else if(m&&e.key.match(/\s+/))O(j),n(null),C("");else if(m)if(8===e.keyCode)C(j.slice(0,-1));else{var a=e.key.toLowerCase();a.match(/[a-z]/i)&&16!==e.keyCode&&91!==e.keyCode&&37!==e.keyCode&&38!==e.keyCode&&39!==e.keyCode&&40!==e.keyCode?C(j+a):16===e.keyCode||37===e.keyCode||38===e.keyCode||39===e.keyCode||40===e.keyCode||(d(!1),n(null),C(""),O(null))}t(S.current.innerText)}})}))),Z=Object(l.b)((function(e){return{reduXprofile:e.profile}}),(function(e){return{setCurrentPage:function(t){return e(_(t))},setErrorMessage:function(t){return e(R(t))}}}))((function(e){var t=e.setCurrentPage,n=e.setErrorMessage,r=e.reduXprofile,o=e.compose,c=function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),o.trim().length>5&&o.trim().length<120?s():n("Error: Text is not the right length");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(p.a)(f.a.mark((function e(){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v({token:r.token,payload:o.trim()});case 2:"OK"!==(a=e.sent)?n(a):(console.log("Post was created."),t("posts"));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return a.a.createElement("div",{className:"btns"},a.a.createElement("button",{name:"cancel",className:"submit",onClick:function(e){e.preventDefault(),n(null),t("posts")}},"Cancel"),a.a.createElement("button",{type:"submit",name:"submit",className:"submit",onClick:c},"Submit"))})),ee=function(e){var t=e.suggested;return a.a.createElement("div",{className:"suggestions"},a.a.createElement("li",null,"Maybe:")," ",t.map((function(e){return a.a.createElement("li",null,"@",e.name)})))},te=function(e){var t=Object(r.useState)(""),n=Object(u.a)(t,2),o=n[0],c=n[1],s=Object(r.useState)([]),l=Object(u.a)(s,2),i=l[0],f=l[1],p=i&&i.length>0;return a.a.createElement("div",{className:"highlighted-compose"},p?a.a.createElement(ee,{compose:o,suggested:i}):"",a.a.createElement(Q,{setCompose:c,setSuggested:f}),a.a.createElement(Z,{compose:o}))},ne=(n(306),Object(l.b)((function(e){return{reduXerrorMessage:e.page.errorMessage}}),(function(e){return{setErrorMessage:function(t){return e(R(t))}}}))((function(e){var t=e.reduXerrorMessage,n=e.setErrorMessage;return t?a.a.createElement("div",{className:"errors",onClick:function(){return n(null)}},t):a.a.createElement("div",null)}))),re=Object(l.b)((function(e){return{reduXprofile:e.profile,allUsers:e.mongoDb.allUsers,reduXcurrentPage:e.page.currentPage,reduXerrorMessage:e.page.errorMessage}}),(function(e){return{setProfile:function(t){return e(x(t))},setErrorMessage:function(t){return e(R(t))},updateAllPosts:function(){return e(W())},updateAllUsers:function(){return e(function(){var e=Object(p.a)(f.a.mark((function e(t,n){var r,a,o,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b();case 3:r=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:if("string"===typeof requestedPosts&&(console.log("There was a connection error with the DB."),r=[]),a=localStorage.getItem("storediD"),o=localStorage.getItem("storedToken"),a){try{c=r.find((function(e){return e._id===a}))}catch(n){console.error(n)}t({type:"ADD_PROFILE",payload:Object(s.a)(Object(s.a)({},c),{},{token:o})})}t({type:"UPDATE_ALL_USERS",payload:r});case 14:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}())}}}))((function(e){var t,n=e.reduXcurrentPage,o=e.updateAllPosts,c=e.updateAllUsers;switch(Object(r.useEffect)((function(){c(),o()}),[n,o,c]),n){case"log-in":t=a.a.createElement(U,null);break;case"register":t=a.a.createElement(q,null);break;case"compose":t=a.a.createElement(te,null);break;case"single-page":t=a.a.createElement(z,null);break;default:t=a.a.createElement($,null)}return a.a.createElement("div",{className:"global-app"},a.a.createElement(ne,null),a.a.createElement("div",{className:"App"},a.a.createElement("div",{className:"sidebar"},a.a.createElement(X,null)),a.a.createElement("div",{className:"container"},t)))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ae=n(20),oe=n(108),ce={allPosts:{},allUsers:{}},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_POSTS":case"UPDATE_ALL_POSTS":return Object(s.a)(Object(s.a)({},e),{},{allPosts:t.payload});case"ADD_USERS":case"UPDATE_ALL_USERS":return Object(s.a)(Object(s.a)({},e),{},{allUsers:t.payload});default:return e}},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PROFILE":return Object(s.a)(Object(s.a)({},e),t.payload);case"REMOVE_PROFILE":return null;default:return e}},le={currentPage:"posts"},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_PAGE":return Object(s.a)(Object(s.a)({},e),{},{currentPage:t.currentPage});case"SET_ERROR_MESSAGE":return Object(s.a)(Object(s.a)({},e),{},{errorMessage:t.message});case"SET_SEARCH":return Object(s.a)(Object(s.a)({},e),{},{search:t.text});case"SET_SEARCH_RESULTS":return Object(s.a)(Object(s.a)({},e),{},{searchResults:t.payload});case"SET_SINGLE_POST":return Object(s.a)(Object(s.a)({},e),{},{singlePost:t.payload});default:return e}},fe=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ae.d,pe=Object(ae.e)(Object(ae.c)({page:ie,profile:ue,mongoDb:se}),fe(Object(ae.a)(oe.a)));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(l.a,{store:pe},a.a.createElement(re,null)),","),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[109,1,2]]]);
//# sourceMappingURL=main.3a70a67c.chunk.js.map