(this.webpackJsonptwttr=this.webpackJsonptwttr||[]).push([[0],{122:function(e,t,r){},123:function(e,t,r){},290:function(e,t,r){},291:function(e,t,r){},292:function(e,t,r){},293:function(e,t,r){},294:function(e,t,r){},295:function(e,t,r){},296:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(96),s=r.n(o),c=r(5),u=r(1),i=r.n(u),l=r(3),p=r(6),f=r(15),m=r.n(f),d=function(){var e=Object(l.a)(i.a.mark((function e(){var t,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",e.next=3,m.a.get("/api/posts").catch((function(e){return t="Error: , ".concat(e.response.data)}));case 3:return r=e.sent,e.abrupt("return",""!==t?t:r.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(l.a)(i.a.mark((function e(){var t,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",e.next=3,m.a.get("/api/users").catch((function(e){return t="Error: , ".concat(e.response.data)}));case 3:return r=e.sent,e.abrupt("return",""!==t?t:r.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(l.a)(i.a.mark((function e(t){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="",e.next=3,m.a.post("/api/login",t).catch((function(e){return r="Error: ".concat(e.response.data)}));case 3:return n=e.sent,e.abrupt("return",""!==r?r:n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(l.a)(i.a.mark((function e(t){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="",e.next=3,m.a.post("/api/users",t).catch((function(e){return r="Error: ".concat(e.response.data)}));case 3:return n=e.sent,e.abrupt("return",""!==r?r:n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(l.a)(i.a.mark((function e(t){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="",e.next=3,m.a.post("/api/posts",t).catch((function(e){return r="Error: ".concat(e.response.data)}));case 3:return n=e.sent,e.abrupt("return",""!==r?r:n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(l.a)(i.a.mark((function e(t){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="",e.next=3,m.a.post("/api/delete",t).catch((function(e){return r="Error: ".concat(e.response.data)}));case 3:return n=e.sent,e.abrupt("return",""!==r?r:n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(l.a)(i.a.mark((function e(t){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="",e.next=3,m.a.post("/api/like",t).catch((function(e){return r="Error: ".concat(e.response.data)}));case 3:return n=e.sent,e.abrupt("return",""!==r?r:n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(l.a)(i.a.mark((function e(t){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="",e.next=3,m.a.post("/api/dislike",t).catch((function(e){return r="Error: ".concat(e.response.data)}));case 3:return n=e.sent,e.abrupt("return",""!==r?r:n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(l.a)(i.a.mark((function e(t){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="",e.next=3,m.a.post("/api/search",t).catch((function(e){return r="Error: ".concat(e.response.data)}));case 3:return n=e.sent,e.abrupt("return",""!==r?r:n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=(r(122),function(e){var t=e.changeCurrentPage,r=(e.profile,e.addProfile),o=e.addErrorMessage,s=Object(n.useState)(),u=Object(p.a)(s,2),f=u[0],m=u[1],d=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),!f||!f.name||!f.password?o("Error: You have to fill out both fields"):g();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(l.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(f);case 2:"string"==typeof(n=e.sent)?(console.log(n),o(n)):(console.log("Log in was successful"),r(n),t("posts"),o(""),localStorage.setItem("storediD",n._id),localStorage.setItem("storedToken",n.token));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return a.a.createElement("form",{onSubmit:d,className:"loginForm",onKeyDown:function(e){13===e.keyCode&&(e.preventDefault(),d(e))}},a.a.createElement("input",{type:"text",name:"name",placeholder:"Enter your name",onChange:function(e){return m(Object(c.a)(Object(c.a)({},f),{},{name:e.target.value.toLowerCase().trim()}))}}),a.a.createElement("input",{type:"password",name:"password",placeholder:"Enter your password",onChange:function(e){return m(Object(c.a)(Object(c.a)({},f),{},{password:e.target.value.trim()}))}}),a.a.createElement("div",{className:"btns"},a.a.createElement("button",{className:"btns",onClick:function(){o(""),t("posts")}}," Cancel "),a.a.createElement("button",{className:"btns submit",type:"submit"},"Submit")))}),j=(r(123),function(e){var t=Object(n.useState)(""),r=Object(p.a)(t,2),o=r[0],s=r[1],c=e.server_GetPostsRequest,u=e.addErrorMessage,f=e.allPosts,m=e.addPost,d=function(){var e=Object(l.a)(i.a.mark((function e(t){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==o){e.next=5;break}c(),e.next=9;break;case 5:return e.next=7,y({payload:o.toLowerCase()});case 7:"string"===typeof(r=e.sent)?(console.log(r),u(r)):(u(""),n=f.filter((function(e){for(var t=0;t<r.length;t++)if(r[t]===e._id)return e})),m(n));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a.a.createElement("form",{onSubmit:d},a.a.createElement("input",{type:"text",name:"search",placeholder:"Search for Hashtag here",onChange:function(e){s(e.target.value)},value:o}))}),x=function(e){var t=e.profile,r=e.currentPage,n=e.addProfile,o=e.changeCurrentPage,s=e.users,c=e.addErrorMessage,u=e.addPost,i=e.allPosts,l=e.server_GetPostsRequest,p=a.a.createElement(j,{server_GetPostsRequest:l,addErrorMessage:c,allPosts:i,addPost:u}),f={};return t&&(f=s.find((function(e){return e._id===t._id}))),t||"posts"!==r?"log in"===r||"register"===r||"compose"===r?a.a.createElement("div",{className:"page-label"},r):a.a.createElement("div",{className:"profile"},a.a.createElement("div",{className:"profile-name",onClick:function(){l()},style:{background:f?f.color:"black"}},f?f.name:""),a.a.createElement("button",{onClick:function(){return o("compose")}}," Compose "),a.a.createElement("button",{onClick:function(){n(null),localStorage.removeItem("storediD"),localStorage.removeItem("storedToken"),o("posts"),console.log("Logged out.")}}," Log Out"),p):a.a.createElement(a.a.Fragment,null,a.a.createElement("button",{className:"login-btn",onClick:function(){return o("log in")}},"Log In "),a.a.createElement("button",{className:"register-btn",onClick:function(){return o("register")}},"Register "),p)},P=r(97),C=(r(290),function(e){var t=e.addProfile,r=e.changeCurrentPage,o=e.addErrorMessage,s=Object(n.useState)(),u=Object(p.a)(s,2),f=u[0],m=u[1],d=Object(n.useRef)(),g=function(e){if(console.log(f),e.preventDefault(),!f||!f.name||!f.password||!f.rePassword||!f.color)o("Error: You have to fill out all fields");else{var t=f.password!==f.rePassword,r=f.name.split("").includes(" ");t?(d.current.style.backgroundColor="#FFE1E1",o("Error: Passwords do not match")):r?o("Error: Name can't have any spaces"):(d.current.style.backgroundColor="white",h())}},h=function(){var e=Object(l.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(f);case 2:"string"==typeof(n=e.sent)?(console.log(n),o(n)):(console.log("Log in was successful"),t(n),r("posts"));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return a.a.createElement("form",{onSubmit:g,className:"registerForm",onKeyDown:function(e){13===e.keyCode&&(e.preventDefault(),g(e))}},a.a.createElement("input",{type:"text",name:"name",placeholder:"Enter your name",onChange:function(e){return m(Object(c.a)(Object(c.a)({},f),{},{name:e.target.value.toLowerCase().trim()}))}}),a.a.createElement("input",{type:"password",name:"password",placeholder:"Enter your password",onChange:function(e){return m(Object(c.a)(Object(c.a)({},f),{},{password:e.target.value.trim()}))}}),a.a.createElement("input",{type:"password",name:"rePassword",ref:d,placeholder:"Re-enter your password",onChange:function(e){return m(Object(c.a)(Object(c.a)({},f),{},{rePassword:e.target.value.trim()}))}}),a.a.createElement("div",{className:"color-btns"},a.a.createElement("div",{className:"color-btns-label"},a.a.createElement("p",null," Choose a color: ")),a.a.createElement("div",{className:"color-btns-choices"},a.a.createElement(P.TwitterPicker,{triangle:"hide",onChangeComplete:function(e,t){m(Object(c.a)(Object(c.a)({},f),{},{color:e.hex}))}}))),a.a.createElement("div",{className:"btns"},a.a.createElement("button",{onClick:function(){r("posts"),o("")}}," Cancel "),a.a.createElement("button",{className:"btns submit",type:"submit"},"Submit")))}),N=(r(291),r(292),r(98)),_=function(e){var t=e.profile,r=e.post,n=e.server_GetPostsRequest,o=function(){var e=Object(l.a)(i.a.mark((function e(a){var o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,w({token:t.token,_id:r._id});case 3:"OK"!==(o=e.sent)?console.log(o):(console.log("Like was added."),n());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(l.a)(i.a.mark((function e(a){var o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,k({token:t.token,_id:r._id});case 3:"OK"!==(o=e.sent)?console.log(o):(console.log("Like was removed."),n());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c={},u=r&&t&&r.authorId!==t._id&&!r.likes.includes(t._id),p=r&&t&&r.authorId!==t._id&&r.likes.includes(t._id);return u?c={color:"black",cursor:"pointer",opacity:1}:p&&(c={color:"red",cursor:"pointer",opacity:1}),a.a.createElement("button",{className:"like",onClick:function(e){u?o(e):p&&s(e)},style:c},a.a.createElement("label",null,r.likes.length),a.a.createElement(N.a,{className:"heart"}))},S=function(e){var t=e.profile,r=e.post,n=e.server_GetPostsRequest,o=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),s();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(l.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E({token:t.token,_id:r._id});case 2:"OK"!==(a=e.sent)?console.log(a):(console.log("Post was successfully deleted."),n());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return a.a.createElement("button",{className:"delete",onClick:o},"Delete")},D=function(e){var t=new Date(e),r="".concat(["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()]," ").concat(t.getDate(),", ").concat(t.getFullYear()),n=t.getHours()>12?t.getHours()-12:t.getHours(),a=(t.getMinutes()<10?"0":"")+t.getMinutes(),o=t.getHours()>=12?"pm":"am";return"".concat(r," | ").concat(n,":").concat(a," ").concat(o)},M=function(e,t){return a.a.createElement(a.a.Fragment,null,e.split(/\s+/).map((function(e){if(e.startsWith("#"))return a.a.createElement("button",{className:"hashtag"},e);if(e.startsWith("@")){var r=t.find((function(t){return t.name===e.toLowerCase().substring(1)})),n={};return r&&(n={background:r.color,color:"black"}),a.a.createElement("button",{style:n,className:"hashtag"},e)}return e+" "})))},R=function(e){var t=e.post,r=e.profile,n=e.users,o=e.changeCurrentPage,s=e.server_GetPostsRequest,c=n.find((function(e){return e._id===t.authorId}));return c||(c={name:"User no longer exists",color:"red"}),a.a.createElement("li",{className:"post"},a.a.createElement("div",{className:"post-header"},a.a.createElement("div",{className:"info-name"},a.a.createElement("div",{className:"icon-color",style:{background:c.color}}),a.a.createElement("h3",null,c.name)),a.a.createElement(_,{profile:r,post:t,changeCurrentPage:o,server_GetPostsRequest:s})),a.a.createElement("div",{className:"post-body"},a.a.createElement("p",{className:"text"},M(t.payload,n))),a.a.createElement("div",{className:"post-footer"},a.a.createElement("p",{className:"date"},D(t.date)),r&&r._id===t.authorId?a.a.createElement(S,{profile:r,post:t,server_GetPostsRequest:s}):""))},q=(r(293),function(e){var t=e.profile,r=e.posts,n=e.users,o=e.changeCurrentPage,s=e.server_GetPostsRequest;return r&&0===r.length?a.a.createElement("div",{className:"emptyPosts"},a.a.createElement("img",{src:"https://media.giphy.com/media/26hkhPJ5hmdD87HYA/giphy.gif",alt:"none found"}),a.a.createElement("p",null,"Unfortunately there are no posts")):a.a.createElement("ul",null,r.slice(0).reverse().map((function(e){return a.a.createElement(R,Object.assign({key:e._id},{profile:t,post:e,users:n,changeCurrentPage:o,server_GetPostsRequest:s}))})))}),G=(r(294),function(e){var t=e.profile,r=e.changeCurrentPage,o=e.addErrorMessage,s=Object(n.useState)(""),c=Object(p.a)(s,2),u=c[0],f=c[1],m=Object(n.useRef)(),d=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),u.trim().length>2&&u.trim().length<120?g():o("Error: Text is not the right length");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(l.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v({token:t.token,payload:u.trim()});case 2:"OK"!==(n=e.sent)?o(n):(console.log("Post was created."),r("posts"));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return a.a.createElement("form",{className:"composeForm",onSubmit:d},a.a.createElement("textarea",{type:"text",name:"text",placeholder:"Enter your message",ref:m,onChange:function(e){f(e.target.value),u.trim().length>120?m.current.style.backgroundColor="red":m.current.style.backgroundColor="white"}}),a.a.createElement("div",{className:"btns"},a.a.createElement("button",{name:"cancel",className:"submit",onClick:function(e){e.preventDefault(),r("posts")}},"Cancel"),a.a.createElement("button",{type:"submit",name:"submit",className:"submit"},"Submit")))}),I=(r(295),function(e){return a.a.createElement("div",{className:"errors",onClick:function(){return e.addErrorMessage("")}},e.errorMessage)});var L=function(){var e,t=Object(n.useState)("posts"),r=Object(p.a)(t,2),o=r[0],s=r[1],u=Object(n.useState)(),f=Object(p.a)(u,2),m=f[0],h=f[1],b=Object(n.useState)([]),v=Object(p.a)(b,2),E=v[0],w=v[1],k=Object(n.useState)([]),y=Object(p.a)(k,2),j=y[0],P=y[1],N=Object(n.useState)([]),_=Object(p.a)(N,2),S=_[0],D=_[1],M=Object(n.useState)(),R=Object(p.a)(M,2),L=R[0],F=R[1],H=function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:"string"===typeof(t=e.sent)?(F("There was a connection error with the DB."),w([])):(w(t),P(t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(l.a)(i.a.mark((function e(){var t,r,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:"string"===typeof(t=e.sent)?console(t):(r=localStorage.getItem("storediD"),n=localStorage.getItem("storedToken"),r&&(a=t.find((function(e){return e._id===r})),h(Object(c.a)(Object(c.a)({},a),{},{token:n}))),D(t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();switch(Object(n.useEffect)((function(){J(),H()}),[o]),o){case"log in":e=a.a.createElement(O,{profile:m,addProfile:h,changeCurrentPage:s,addErrorMessage:F});break;case"register":e=a.a.createElement(C,{addProfile:h,changeCurrentPage:s,addErrorMessage:F});break;case"compose":e=a.a.createElement(G,{profile:m,changeCurrentPage:s,addErrorMessage:F});break;default:e=a.a.createElement(q,{profile:m,posts:E,users:S,changeCurrentPage:s,server_GetPostsRequest:H})}return a.a.createElement("div",{className:"global-app"},L?a.a.createElement(I,{errorMessage:L,addErrorMessage:F}):"",a.a.createElement("div",{className:"App"},a.a.createElement("div",{className:"sidebar"},a.a.createElement(x,{users:S,profile:m,addProfile:h,currentPage:o,changeCurrentPage:s,addErrorMessage:F,addPost:w,allPosts:j,server_GetPostsRequest:H})),a.a.createElement("div",{className:"container"},e)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},99:function(e,t,r){e.exports=r(296)}},[[99,1,2]]]);
//# sourceMappingURL=main.bdcddad4.chunk.js.map