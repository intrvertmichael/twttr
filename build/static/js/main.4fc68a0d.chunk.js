(this.webpackJsonptwttr=this.webpackJsonptwttr||[]).push([[0],{122:function(e,t,r){},123:function(e,t,r){},290:function(e,t,r){},291:function(e,t,r){},292:function(e,t,r){},293:function(e,t,r){},294:function(e,t,r){},295:function(e,t,r){},296:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),o=r(96),c=r.n(o),s=r(2),u=r.n(s),i=r(4),l=r(11),p=r(18),m=r.n(p),f=function(){var e=Object(i.a)(u.a.mark((function e(){var t,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",e.next=3,m.a.get("/api/posts").catch((function(e){return t="Error: , ".concat(e.response.data)}));case 3:return r=e.sent,e.abrupt("return",""!==t?t:r.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(i.a)(u.a.mark((function e(t){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="",e.next=3,m.a.post("/api/login",t).catch((function(e){return r="Error: ".concat(e.response.data)}));case 3:return a=e.sent,e.abrupt("return",""!==r?r:a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(i.a)(u.a.mark((function e(t){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="",e.next=3,m.a.post("/api/users",t).catch((function(e){return r="Error: ".concat(e.response.data)}));case 3:return a=e.sent,e.abrupt("return",""!==r?r:a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(i.a)(u.a.mark((function e(t){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="",e.next=3,m.a.post("/api/posts",t).catch((function(e){return r="Error: ".concat(e.response.data)}));case 3:return a=e.sent,e.abrupt("return",""!==r?r:a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(i.a)(u.a.mark((function e(t){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="",e.next=3,m.a.post("/api/delete",t).catch((function(e){return r="Error: ".concat(e.response.data)}));case 3:return a=e.sent,e.abrupt("return",""!==r?r:a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(i.a)(u.a.mark((function e(t){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="",e.next=3,m.a.post("/api/like",t).catch((function(e){return r="Error: ".concat(e.response.data)}));case 3:return a=e.sent,e.abrupt("return",""!==r?r:a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=r(5),w=(r(122),function(e){var t=e.changeCurrentPage,r=e.addProfile,o=e.addErrorMessage,c=Object(a.useState)(),s=Object(l.a)(c,2),p=s[0],m=s[1],f=function(){var e=Object(i.a)(u.a.mark((function e(a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),!(!p||!p.name||!p.password)){e.next=6;break}o("Error: You have to fill out both fields"),e.next=10;break;case 6:return e.next=8,d(p);case 8:"string"==typeof(n=e.sent)?(console.log(n),o(n)):(console.log("Log in was successful"),r(n),t("posts"),o(""));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement("form",{onSubmit:f,className:"loginForm",onKeyDown:function(e){13===e.keyCode&&(e.preventDefault(),f(e))}},n.a.createElement("input",{type:"text",name:"name",placeholder:"Enter your name",onChange:function(e){return m(Object(E.a)(Object(E.a)({},p),{},{name:e.target.value.toLowerCase().trim()}))}}),n.a.createElement("input",{type:"password",name:"password",placeholder:"Enter your password",onChange:function(e){return m(Object(E.a)(Object(E.a)({},p),{},{password:e.target.value.trim()}))}}),n.a.createElement("div",{className:"btns"},n.a.createElement("button",{className:"btns",onClick:function(){o(""),t("posts")}}," Cancel "),n.a.createElement("button",{className:"btns submit",type:"submit"},"Submit")))}),k=(r(123),function(e){return e.profile||"posts"!==e.currentPage?"log in"===e.currentPage||"register"===e.currentPage||"compose"===e.currentPage?n.a.createElement("div",{className:"page-label"},e.currentPage):n.a.createElement("div",{className:"profile"},n.a.createElement("div",{className:"profile-name",style:{background:e.profile?e.profile.color:"red"}},e.profile?e.profile.name:""),n.a.createElement("button",{onClick:function(){return e.changeCurrentPage("compose")}}," Compose "),n.a.createElement("button",{onClick:function(){e.addProfile(null),e.changeCurrentPage("posts")}},"Log Out")):n.a.createElement(n.a.Fragment,null,n.a.createElement("button",{className:"login-btn",onClick:function(){return e.changeCurrentPage("log in")}},"Log In "),n.a.createElement("button",{className:"register-btn",onClick:function(){return e.changeCurrentPage("register")}},"Register "))}),y=r(97),C=(r(290),function(e){var t=e.addProfile,r=e.changeCurrentPage,o=e.addErrorMessage,c=Object(a.useState)(),s=Object(l.a)(c,2),p=s[0],m=s[1],f=Object(a.useState)(),d=Object(l.a)(f,2),b=(d[0],d[1],Object(a.useRef)()),h=function(){var e=Object(i.a)(u.a.mark((function e(a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),console.log(p),!(!p||!p.name||!p.password||!p.rePassword||!p.color)){e.next=7;break}o("Error: You have to fill out all fields"),e.next=18;break;case 7:if(!(p.password!==p.rePassword)){e.next=13;break}b.current.style.backgroundColor="#FFE1E1",o("Error: Passwords do not match"),e.next=18;break;case 13:return b.current.style.backgroundColor="white",e.next=16,g(p);case 16:"string"==typeof(n=e.sent)?(console.log("there is an error"),console.log(n)):(console.log("log in was successful"),t(n),r("posts"));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return console.log(p),n.a.createElement("form",{onSubmit:h,className:"registerForm",onKeyDown:function(e){13===e.keyCode&&(e.preventDefault(),h(e))}},n.a.createElement("input",{type:"text",name:"name",placeholder:"Enter your name",onChange:function(e){return m(Object(E.a)(Object(E.a)({},p),{},{name:e.target.value.toLowerCase().trim()}))}}),n.a.createElement("input",{type:"password",name:"password",placeholder:"Enter your password",onChange:function(e){return m(Object(E.a)(Object(E.a)({},p),{},{password:e.target.value.trim()}))}}),n.a.createElement("input",{type:"password",name:"rePassword",ref:b,placeholder:"Re-enter your password",onChange:function(e){return m(Object(E.a)(Object(E.a)({},p),{},{rePassword:e.target.value.trim()}))}}),n.a.createElement("div",{className:"color-btns"},n.a.createElement("div",{className:"color-btns-label"},n.a.createElement("p",null," Choose a color: ")),n.a.createElement("div",{className:"color-btns-choices"},n.a.createElement(y.TwitterPicker,{triangle:"hide",onChangeComplete:function(e,t){m(Object(E.a)(Object(E.a)({},p),{},{color:e.hex}))}}))),n.a.createElement("div",{className:"btns"},n.a.createElement("button",{onClick:function(){r("posts"),o("")}}," Cancel "),n.a.createElement("button",{className:"btns submit",type:"submit"},"Submit")))}),O=(r(291),r(292),r(98)),j=function(e){var t=e.profile,r=e.post,a=e.likeRequest,o=function(){var n=Object(i.a)(u.a.mark((function n(o){var c;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o.preventDefault(),n.next=3,a({token:t.token,_id:r._id});case 3:c=n.sent,console.log(c),e.fetchPosts();case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),c={};return r&&t&&r.authorId!==t._id&&!r.likes.includes(t._id)?c={color:"black",cursor:"pointer",opacity:1}:r&&t&&r.authorId!==t._id&&r.likes.includes(t._id)&&(c={color:"red",cursor:"pointer",opacity:1}),n.a.createElement("button",{className:"like",onClick:function(e){t&&t._id!==r.authorId&&!r.likes.includes(t._id)&&o(e)},style:c},n.a.createElement("label",null,r.likes.length),n.a.createElement(O.a,{className:"heart"}))},P=function(e){var t,r=e.post,a=e.profile,o=e.changeCurrentPage,c=e.fetchPosts,s=function(){var e=Object(i.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,h({token:a.token,_id:r._id});case 3:n=e.sent,console.log(n),c();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();a&&a._id===r.authorId&&(t=n.a.createElement("button",{className:"delete",onClick:s}," Delete "));var l=new Date(r.date),p="".concat(["January","February","March","April","May","June","July","August","September","October","November","December"][l.getMonth()]," ").concat(l.getDate(),", ").concat(l.getFullYear()),m=l.getHours()>12?l.getHours()-12:l.getHours(),f=(l.getMinutes()<10?"0":"")+l.getMinutes(),d=l.getHours()>=12?"pm":"am",g="".concat(p," | ").concat(m,":").concat(f," ").concat(d);return n.a.createElement("li",{className:"post"},n.a.createElement("div",{className:"info"},n.a.createElement("div",{className:"info-name"},n.a.createElement("div",{className:"icon-color",style:{background:r.color}}),n.a.createElement("h3",null,r.name)),n.a.createElement("p",{className:"text"},r.payload),n.a.createElement("p",{className:"date"},g)),n.a.createElement("div",{className:"postButtons"},n.a.createElement(j,{profile:a,post:r,likeRequest:v,changeCurrentPage:o,fetchPosts:c}),t))},x=(r(293),function(e){var t=e.profile,r=e.posts,a=e.changeCurrentPage,o=e.fetchPosts;return r&&0===r.length?n.a.createElement("div",{className:"emptyPosts"},n.a.createElement("img",{src:"https://media.giphy.com/media/26hkhPJ5hmdD87HYA/giphy.gif",alt:"none found"}),n.a.createElement("p",null,"Unfortunately there are no posts")):n.a.createElement("ul",null,r.slice(0).reverse().map((function(e){return n.a.createElement(P,Object.assign({key:e._id},{profile:t,post:e,changeCurrentPage:a,fetchPosts:o}))})))}),N=(r(294),function(e){var t=e.profile,r=e.changeCurrentPage,o=Object(a.useState)(""),c=Object(l.a)(o,2),s=c[0],p=c[1],m=Object(a.useRef)(),f=function(){var a=Object(i.a)(u.a.mark((function a(n){var o;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n.preventDefault(),!(s.trim("").length>2&&s.trim("").length<280&&e.profile)){a.next=9;break}return a.next=4,b({token:t.token,payload:s});case 4:o=a.sent,console.log(o),r("posts"),a.next=10;break;case 9:console.log("either the text is too short or theres no profile");case 10:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return n.a.createElement("form",{className:"composeForm",onSubmit:f},n.a.createElement("textarea",{type:"text",name:"text",placeholder:"Enter your message",ref:m,onChange:function(e){p(e.target.value.trim()),s.trim("").length>280?m.current.style.backgroundColor="red":m.current.style.backgroundColor="white"}}),n.a.createElement("div",{className:"btns"},n.a.createElement("button",{name:"cancel",className:"submit",onClick:function(e){e.preventDefault(),r("posts")}},"Cancel"),n.a.createElement("button",{type:"submit",name:"submit",className:"submit"},"Submit")))}),D=(r(295),function(e){return n.a.createElement("div",{className:"errors",onClick:function(){return e.addErrorMessage("")}},e.errorMessage)});var S=function(){var e,t=Object(a.useState)("posts"),r=Object(l.a)(t,2),o=r[0],c=r[1],s=Object(a.useState)(),p=Object(l.a)(s,2),m=p[0],d=p[1],g=Object(a.useState)([]),b=Object(l.a)(g,2),h=b[0],v=b[1],E=Object(a.useState)(),y=Object(l.a)(E,2),O=y[0],j=y[1],P=function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:"string"===typeof(t=e.sent)?(j("There was a connection error with the DB."),v([])):v(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();switch(Object(a.useEffect)((function(){P()}),[o]),o){case"log in":e=n.a.createElement(w,{addProfile:d,changeCurrentPage:c,addErrorMessage:j});break;case"register":e=n.a.createElement(C,{addProfile:d,changeCurrentPage:c,addErrorMessage:j});break;case"compose":e=n.a.createElement(N,{profile:m,changeCurrentPage:c});break;default:e=n.a.createElement(x,{profile:m,posts:h,changeCurrentPage:c,fetchPosts:P})}return n.a.createElement("div",{className:"global-app"},O?n.a.createElement(D,{errorMessage:O,addErrorMessage:j}):"",n.a.createElement("div",{className:"App"},n.a.createElement("div",{className:"sidebar"},n.a.createElement(k,{profile:m,addProfile:d,currentPage:o,changeCurrentPage:c,addErrorMessage:j})),n.a.createElement("div",{className:"container"},e)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},99:function(e,t,r){e.exports=r(296)}},[[99,1,2]]]);
//# sourceMappingURL=main.4fc68a0d.chunk.js.map