(this.webpackJsonptwttr=this.webpackJsonptwttr||[]).push([[0],{108:function(e,t,n){e.exports=n(307)},113:function(e,t,n){},136:function(e,t,n){},300:function(e,t,n){},301:function(e,t,n){},302:function(e,t,n){},303:function(e,t,n){},304:function(e,t,n){},305:function(e,t,n){},306:function(e,t,n){},307:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(40),c=n.n(o),s=n(2),u=n(7),l=n(28),i=n.n(l),f=(n(113),n(5)),p=n(1),m=n.n(p),d=n(4),g=n(9),b=n.n(g),E=function(){var e=Object(d.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",e.next=3,b.a.get("/api/posts").catch((function(e){return t="Error: , ".concat(e.response.data)}));case 3:return n=e.sent,e.abrupt("return",""!==t?t:n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(d.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",e.next=3,b.a.get("/api/users").catch((function(e){return t="Error: , ".concat(e.response.data)}));case 3:return n=e.sent,e.abrupt("return",""!==t?t:n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(d.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.next=3,b.a.post("/api/login",t).catch((function(e){return n="Error: ".concat(e.response.data)}));case 3:return r=e.sent,e.abrupt("return",""!==n?n:r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.next=3,b.a.post("/api/users",t).catch((function(e){return n="Error: ".concat(e.response.data)}));case 3:return r=e.sent,e.abrupt("return",""!==n?n:r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(d.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.next=3,b.a.post("/api/posts",t).catch((function(e){return n="Error: ".concat(e.response.data)}));case 3:return r=e.sent,e.abrupt("return",""!==n?n:r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(d.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.next=3,b.a.post("/api/delete",t).catch((function(e){return n="Error: ".concat(e.response.data)}));case 3:return r=e.sent,e.abrupt("return",""!==n?n:r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(d.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.next=3,b.a.post("/api/like",t).catch((function(e){return n="Error: ".concat(e.response.data)}));case 3:return r=e.sent,e.abrupt("return",""!==n?n:r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(d.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.next=3,b.a.post("/api/dislike",t).catch((function(e){return n="Error: ".concat(e.response.data)}));case 3:return r=e.sent,e.abrupt("return",""!==n?n:r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(d.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.next=3,b.a.post("/api/search",t).catch((function(e){return n="Error: ".concat(e.response.data)}));case 3:return r=e.sent,e.abrupt("return",""!==n?n:r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(d.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.next=3,b.a.post("/api/userPosts",t).catch((function(e){return n="Error: ".concat(e.response.data)}));case 3:return r=e.sent,e.abrupt("return",""!==n?n:r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(d.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.next=3,b.a.get("/api/post/".concat(t)).catch((function(e){return n="Error: ".concat(e.response.data)}));case 3:return r=e.sent,e.abrupt("return",""!==n?n:r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(d.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.next=3,b.a.post("/api/comments",t).catch((function(e){return n="Error: ".concat(e.response.data)}));case 3:return r=e.sent,e.abrupt("return",""!==n?n:r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(d.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.next=3,b.a.post("/api/deletecomment",t).catch((function(e){return n="Error: ".concat(e.response.data)}));case 3:return r=e.sent,e.abrupt("return",""!==n?n:r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(e){return function(t,n){t({type:"ADD_PROFILE",payload:e})}},N=function(e){return function(t,n){t({type:"SET_CURRENT_PAGE",currentPage:e})}},D=function(e){return function(t,n){t({type:"SET_ERROR_MESSAGE",message:e})}},T=function(e){return function(t,n){t({type:"SET_SEARCH",text:e})}},U=function(e){return function(t,n){t({type:"SET_SEARCH_RESULTS",payload:e})}},A=function(e){return e?function(){var t=Object(d.a)(m.a.mark((function t(n,r){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x(e);case 2:a=t.sent,n({type:"SET_SINGLE_POST",payload:a});case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}():function(e,t){e({type:"SET_SINGLE_POST",payload:null})}},M=Object(f.b)((function(e){return{allUsers:e.mongoDb.allUsers,reduXprofile:e.profile}}),(function(e){return{setProfile:function(t){return e(R(t))},logInRequest:function(t){return e(function(e){return function(){var t=Object(d.a)(m.a.mark((function t(n,r){var a,o,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(e);case 2:"string"==typeof(a=t.sent)?(console.log(a),n({type:"SET_ERROR_MESSAGE",message:a})):(console.log("Log in was successful"),o=r().mongoDb.allUsers,c=o.find((function(e){return e._id===a._id})),localStorage.setItem("storediD",a._id),localStorage.setItem("storedToken",a.token),n({type:"ADD_PROFILE",payload:Object(s.a)(Object(s.a)({},c),{},{token:a.token})}),n({type:"SET_CURRENT_PAGE",currentPage:"posts"}));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(t))},setCurrentPage:function(t){return e(N(t))},setErrorMessage:function(t){return e(D(t))}}}))((function(e){var t=e.setCurrentPage,n=e.setErrorMessage,o=e.logInRequest,c=Object(r.useState)(),l=Object(u.a)(c,2),i=l[0],f=l[1],p=function(e){e.preventDefault(),!i||!i.name||!i.password?n("Error: You have to fill out both fields"):(n(null),o(i))};return a.a.createElement("form",{onSubmit:p,className:"loginForm",onKeyDown:function(e){13===e.keyCode&&(e.preventDefault(),p(e))}},a.a.createElement("input",{type:"text",name:"name",placeholder:"Enter your name",onChange:function(e){return f(Object(s.a)(Object(s.a)({},i),{},{name:e.target.value.toLowerCase().trim()}))}}),a.a.createElement("input",{type:"password",name:"password",placeholder:"Enter your password",onChange:function(e){return f(Object(s.a)(Object(s.a)({},i),{},{password:e.target.value.trim()}))}}),a.a.createElement("div",{className:"btns"},a.a.createElement("button",{className:"btns",onClick:function(){n(null),t("posts")}}," Cancel "),a.a.createElement("button",{className:"btns submit",type:"submit"},"Submit")))})),L=(n(136),Object(f.b)((function(e){return{allPosts:e.mongoDb.allPosts,search:e.page.search}}),(function(e){return{setErrorMessage:function(t){return e(D(t))},setSearch:function(t){return e(T(t))},setSearchResults:function(t){return e(U(t))}}}))((function(e){var t=e.setErrorMessage,n=e.setSearch,o=e.search,c=e.allPosts,s=e.setSearchResults,l=Object(r.useState)(),i=Object(u.a)(l,2),f=i[0],p=i[1],g=function(){var e=Object(d.a)(m.a.mark((function e(n){var r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Searching for posts with ".concat(n," hashtag")),e.next=3,j({payload:n.toLowerCase()});case 3:"string"===typeof(r=e.sent)?(console.log(r),t(r)):(t(null),a=c.filter((function(e){for(var t=0;t<r.length;t++)if(r[t]===e._id)return e})),s(a));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){""===o?(n(null),s(null)):o&&g(o)}),[o]);var b=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),console.log("search submitted ".concat(f)),n(f);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a.a.createElement("form",{onSubmit:b},a.a.createElement("input",{type:"text",name:"search",placeholder:"Search for Hashtag here",onChange:function(e){p(e.target.value)},value:f}))}))),I=n(22),X=Object(f.b)((function(e){return{allUsers:e.mongoDb.allUsers,reduXprofile:e.profile,reduXcurrentPage:e.page.currentPage}}),(function(e){return{setProfile:function(t){return e(R(t))},removeProfile:function(){return e((function(e,t){e({type:"REMOVE_PROFILE"})}))},setCurrentPage:function(t){return e(N(t))},setSearch:function(t){return e(T(t))},setSearchResults:function(t){return e(U(t))},setErrorMessage:function(t){return e(D(t))}}}))((function(e){var t=e.removeProfile,n=e.reduXprofile,r=e.reduXcurrentPage,o=e.setCurrentPage,c=e.setSearch,s=e.setSearchResults,u=e.setErrorMessage,l=a.a.createElement(L,null),f=function(e){e.preventDefault(),c(null),s(null),u(null),o("posts")},p=a.a.createElement("div",{className:"page-logo",onClick:f}," ",a.a.createElement(I.c,null)," ");return!i.a.isEmpty(n)||"posts"!==r&&"single-page"!==r?"log-in"===r||"register"===r||"compose"===r?a.a.createElement(a.a.Fragment,null,"compose"!==r?p:a.a.createElement("div",{className:"profile-name compose-profile-name",onClick:f,style:{background:n.color}},n.name),a.a.createElement("div",{className:"page-label"},"log-in"===r?"Log In":r)):a.a.createElement("div",{className:"profile"},a.a.createElement("div",{className:"profile-name",onClick:f,style:{background:n.color}},n.name),a.a.createElement("button",{onClick:function(){return o("compose")}}," Compose "),a.a.createElement("button",{onClick:function(){console.log("Logged out."),t(),localStorage.removeItem("storediD"),localStorage.removeItem("storedToken"),u("You are now logged out. Hope to see you again soon."),o("posts")}}," Log Out"),l):a.a.createElement(a.a.Fragment,null,p,a.a.createElement("button",{className:"login-btn",onClick:function(){return o("log-in")}},"Log In "),a.a.createElement("button",{className:"register-btn",onClick:function(){return o("register")}},"Register "),l)})),F=n(106),G=(n(300),Object(f.b)((function(e){return{allUsers:e.mongoDb.allUsers,reduXprofile:e.profile}}),(function(e){return{setProfile:function(t){return e(R(t))},registerUser:function(t){return e(function(e){return function(){var t=Object(d.a)(m.a.mark((function t(n,r){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O(e);case 2:"string"==typeof(a=t.sent)?(console.log(a),n({type:"SET_ERROR_MESSAGE",message:a})):(console.log("Registration was successful"),n({type:"ADD_PROFILE",payload:a}));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(t))},setCurrentPage:function(t){return e(N(t))},setErrorMessage:function(t){return e(D(t))}}}))((function(e){var t=e.registerUser,n=e.setCurrentPage,o=e.setErrorMessage,c=Object(r.useState)(),l=Object(u.a)(c,2),i=l[0],f=l[1],p=Object(r.useRef)(),m=function(e){if(e.preventDefault(),!i||!i.name||!i.password||!i.rePassword||!i.color)o("Error: You have to fill out all fields");else{var r=i.password!==i.rePassword,a=i.name.split("").includes(" ");r?(p.current.style.backgroundColor="#FFE1E1",o("Error: Passwords do not match")):a?o("Error: Name can't have any spaces"):(p.current.style.backgroundColor="white",o(""),n("posts"),t(i))}};return a.a.createElement("form",{onSubmit:m,className:"registerForm",onKeyDown:function(e){13===e.keyCode&&(e.preventDefault(),m(e))}},a.a.createElement("input",{type:"text",name:"name",placeholder:"Enter your name",onChange:function(e){return f(Object(s.a)(Object(s.a)({},i),{},{name:e.target.value.toLowerCase().trim()}))}}),a.a.createElement("input",{type:"password",name:"password",placeholder:"Enter your password",onChange:function(e){return f(Object(s.a)(Object(s.a)({},i),{},{password:e.target.value.trim()}))}}),a.a.createElement("input",{type:"password",name:"rePassword",ref:p,placeholder:"Re-enter your password",onChange:function(e){return f(Object(s.a)(Object(s.a)({},i),{},{rePassword:e.target.value.trim()}))}}),a.a.createElement("div",{className:"color-btns"},a.a.createElement("div",{className:"color-btns-label"},a.a.createElement("p",null," Choose a color: ")),a.a.createElement("div",{className:"color-btns-choices"},a.a.createElement(F.TwitterPicker,{triangle:"hide",onChangeComplete:function(e,t){f(Object(s.a)(Object(s.a)({},i),{},{color:e.hex}))}}))),a.a.createElement("div",{className:"btns"},a.a.createElement("button",{onClick:function(){n("posts"),o(null)}}," Cancel "),a.a.createElement("button",{className:"btns submit",type:"submit"},"Submit")))}))),H=function(){return function(){var e=Object(d.a)(m.a.mark((function e(t,n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:"string"===typeof(r=e.sent)?(console.log(r),t({type:"UPDATE_ALL_POSTS",payload:[]}),t({type:"SET_ERROR_MESSAGE",message:r})):t({type:"UPDATE_ALL_POSTS",payload:r});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},q=Object(f.b)((function(e){return{allUsers:e.mongoDb.allUsers,reduXprofile:e.profile,currentPage:e.page.currentPage}}),(function(e){return{updateAllPosts:function(){return e(H())},addLikeRequest:function(t){return e(function(e){return function(){var t=Object(d.a)(m.a.mark((function t(n,r){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e);case 2:"OK"!==(a=t.sent)?(console.log(a),n({type:"SET_ERROR_MESSAGE",message:a})):console.log("Like was added.");case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(t))},removeLikeRequest:function(t){return e(function(e){return function(){var t=Object(d.a)(m.a.mark((function t(n,r){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S(e);case 2:"OK"!==(a=t.sent)?(console.log(a),n({type:"SET_ERROR_MESSAGE",message:a})):console.log("Like was removed.");case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(t))},setSinglePost:function(t){return e(A(t))},setErrorMessage:function(t){return e(D(t))}}}))((function(e){var t=e.reduXprofile,n=e.updateAllPosts,r=e.currentPage,o=e.setSinglePost,c=e.post,s=e.addLikeRequest,u=e.removeLikeRequest,l=e.setErrorMessage,i={},f=t&&c.authorId!==t._id&&!c.likes.includes(t._id),p=t&&c.authorId!==t._id&&c.likes.includes(t._id);return f?i={color:"black",cursor:"pointer",opacity:1}:p&&(i={color:"red",cursor:"pointer",opacity:1}),a.a.createElement("button",{className:"like",onClick:function(){var e=Object(d.a)(m.a.mark((function e(a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}l("Please log in to be able to like a post"),e.next=12;break;case 4:if(!f){e.next=9;break}return e.next=7,s({token:t.token,_id:c._id});case 7:e.next=12;break;case 9:if(!p){e.next=12;break}return e.next=12,u({token:t.token,_id:c._id});case 12:if("posts"!==r){e.next=17;break}return e.next=15,n();case 15:e.next=20;break;case 17:if("single-page"!==r){e.next=20;break}return e.next=20,o(c._id);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),style:i},a.a.createElement("label",null,c.likes.length),a.a.createElement(I.b,{className:"heart"}))})),K=Object(f.b)((function(e){return{allUsers:e.mongoDb.allUsers,reduXprofile:e.profile}}),(function(e){return{updateAllPosts:function(){return e(H())},deletePostRequest:function(t){return e(function(e){return function(){var t=Object(d.a)(m.a.mark((function t(n,r){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k(e);case 2:"OK"!==(a=t.sent)?console.log(a):(console.log("Post was successfully deleted."),n({type:"SET_CURRENT_PAGE",currentPage:"posts"}));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(t))},setCurrentPage:function(t){return e(N(t))}}}))((function(e){var t=e.reduXprofile,n=e.updateAllPosts,r=e.deletePostRequest,o=e.post,c=function(){var e=Object(d.a)(m.a.mark((function e(a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,r({token:t.token,_id:o._id});case 3:n();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a.a.createElement("button",{className:"delete",onClick:c},"Delete")})),W=function(e){var t=new Date(e),n="".concat(["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()]," ").concat(t.getDate(),", ").concat(t.getFullYear()),r=t.getHours()>12?t.getHours()-12:t.getHours(),a=(t.getMinutes()<10?"0":"")+t.getMinutes(),o=t.getHours()>=12?"pm":"am";return"".concat(n," | ").concat(r,":").concat(a," ").concat(o)},J=Object(f.b)((function(e){return{allPosts:e.mongoDb.allPosts,allUsers:e.mongoDb.allUsers,reduXprofile:e.profile,currentPage:e.page.currentPage}}),(function(e){return{setSearch:function(t){return e(T(t))},getUserPosts:function(t){return e(function(e){return function(){var t=Object(d.a)(m.a.mark((function t(n,r){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P({authorId:e});case 2:"string"===typeof(a=t.sent)?(console.log(a),n({type:"SET_ERROR_MESSAGE",message:a})):(console.log("User's Posts were retreived."),n({type:"SET_SEARCH_RESULTS",payload:a}));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(t))},setCurrentPage:function(t){return e(N(t))},updateAllPosts:function(){return e(H())},setSinglePost:function(t){return e(A(t))}}}))((function(e){var t,n=e.setSearch,r=e.allUsers,o=e.reduXprofile,c=e.setCurrentPage,s=e.setSinglePost,u=e.currentPage,l=e.getUserPosts,i=e.post;if(r&&i){var f=r.filter((function(e){return e._id===i.authorId}));t=f[0]}t||(t={name:"User no longer exists",color:"red"});var p=function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(i._id);case 2:c("single-page");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(e){c("posts"),s(null),n(e)};return a.a.createElement("li",{className:"post"},a.a.createElement("div",{className:"post-header"},a.a.createElement("div",{className:"info-name",onClick:function(){l(t._id),"posts"!==u&&c("posts")}},a.a.createElement("div",{className:"icon-color",style:{background:t.color}}),a.a.createElement("h3",null,t.name)),a.a.createElement("div",{className:"like-comment-icons"},"posts"===u?a.a.createElement("el",{onClick:p,className:"comments"},a.a.createElement("label",null," ",i.comments?i.comments.length:0," "),a.a.createElement(I.a,{className:"commentbox"})):"",a.a.createElement(q,{post:i}))),a.a.createElement("div",{className:"post-body"},a.a.createElement("p",{className:"text"},function(e,t){return a.a.createElement(a.a.Fragment,null,e.split(/\s+/).map((function(e){if(e.startsWith("#"))return a.a.createElement("button",{onClick:function(){return g(e)},className:"hashtag"},e);if(e.startsWith("@")){var n=t.find((function(t){return t.name===e.toLowerCase().substring(1)})),r={};return n&&(r={background:n.color,color:"black"}),a.a.createElement("button",{style:r,className:"hashtag",onClick:function(){l(n._id),"posts"!==u&&c("posts")}},e)}return e+" "})))}(i.payload,r))),a.a.createElement("div",{className:"post-footer"},a.a.createElement("div",{className:"date-comments"},a.a.createElement("p",{className:"date"},W(i.date))),o&&o._id===i.authorId?a.a.createElement(K,{post:i}):""))})),Y=(n(301),Object(f.b)((function(e){return{singlePost:e.page.singlePost,profile:e.profile,allUsers:e.mongoDb.allUsers}}),(function(e){return{setSinglePost:function(t){return e(A(t))}}}))((function(e){var t=Object(r.useState)(),n=Object(u.a)(t,2),o=n[0],c=n[1],s=e.singlePost,l=e.profile,i=e.allUsers,f=e.setSinglePost,p=function(){var e=Object(d.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={token:l.token,_id:s._id,message:o.trim()},e.next=4,_(n);case 4:if("OK"===(r=e.sent)){e.next=9;break}console.log(r),e.next=13;break;case 9:return console.log("Comment was added."),c(""),e.next=13,f(s._id);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=a.a.createElement("form",{onSubmit:p},a.a.createElement("input",{type:"text",name:"comment",className:"comment-input",value:o,placeholder:"Enter your comment here",onChange:function(e){return c(e.target.value)}})),b=function(){var e=Object(d.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={token:l.token,postId:s._id,commentId:t},e.next=3,C(n);case 3:if("OK"===(r=e.sent)){e.next=8;break}console.log(r),e.next=11;break;case 8:return console.log("Comment was added."),e.next=11,f(s._id);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=s.comments?s.comments.map((function(e){var t;return i&&(t=i.find((function(t){return t._id===e.authorId}))),a.a.createElement("div",{className:"single-comment",style:{borderRight:"10px solid ".concat(t.color)}},a.a.createElement("div",null,a.a.createElement("span",null," ","".concat(t.name,": ")," "),e.message),l&&e.authorId===l._id?a.a.createElement("button",{className:"delete-comment",onClick:function(t){t.preventDefault(),b(e._id)}}," Delete "):"")})):"";return a.a.createElement("div",null,a.a.createElement(J,{post:s}),a.a.createElement("div",{className:"comments-page"},a.a.createElement("div",{className:"comments-loop"},E),l?g:""))}))),B=(n(302),n(303),n(304),Object(f.b)((function(e){return{allPosts:e.mongoDb.allPosts,searchResults:e.page.searchResults}}),(function(e){return{}}))((function(e){var t=e.allPosts,n=e.searchResults,r=e.addPost,o=t;return n&&(o=n),i.a.isEmpty(o)||"string"===typeof o?a.a.createElement("div",{className:"emptyPosts"},a.a.createElement("p",null,"Unfortunately there are no posts")):a.a.createElement("ul",null,o.slice(0).reverse().map((function(e){return a.a.createElement(J,Object.assign({key:e._id},{post:e,addPost:r}))})))}))),V=(n(305),Object(f.b)((function(e){return{allUsers:e.mongoDb.allUsers}}))((function(e){var t=e.setCompose,n=e.setSuggested,o=e.allUsers,c=Object(r.useState)(!1),s=Object(u.a)(c,2),l=s[0],i=s[1],f=Object(r.useState)(!1),p=Object(u.a)(f,2),m=p[0],d=p[1],g=Object(r.useState)(null),b=Object(u.a)(g,2),E=b[0],h=b[1],v=Object(r.useState)(null),O=Object(u.a)(v,2),y=O[0],k=O[1],w=Object(r.useRef)();Object(r.useEffect)((function(){if(E){document.designMode="on";for(var e=0;e<=E.length;e++)document.execCommand("delete",!1,"");document.execCommand("insertHTML",!1,"<a href='/' class='hashtag'>".concat(E,"</a>")),document.execCommand("insertText",!1," "),document.designMode="off",setTimeout((function(){w.current.focus()}),0),h(""),i(!1)}}),[E]),Object(r.useEffect)((function(){if(y){document.designMode="on";for(var e=0;e<=y.length;e++)document.execCommand("delete",!1,"");var t=o.filter((function(e){return e.name===y.substring(1)})),n=t[0],r=t.length>0?"background:".concat(n.color):"";document.execCommand("insertHTML",!1,"<a href='/' class='mention' style=".concat(r,">").concat(y,"</a>")),document.execCommand("insertText",!1," "),document.designMode="off",setTimeout((function(){w.current.focus()}),0),k(null),d(!1)}}),[o,y]);var S=Object(r.useState)(""),j=Object(u.a)(S,2),P=j[0],x=j[1];Object(r.useEffect)((function(){if(console.log(P),P.length>0&&o){var e=o.filter((function(e){return e.name.startsWith(P)}));console.log(e),n(e)}else n(null)}),[o,P,n]);return a.a.createElement("div",{contentEditable:"true",ref:w,class:"highlighted-compose-textArea",placeholder:"type something here...",onKeyUp:function(e){var r=w.current;if(51===e.keyCode?i(!0):l&&8===e.keyCode&&E&&1===E.length?(i(!1),h(null),n(null),x("")):l&&32===e.keyCode&&(r.innerText.split(/\s+/).forEach((function(e){e.startsWith("#")&&h(e)})),n(null),x("")),50===e.keyCode)d(!0);else if(m&&8===e.keyCode&&y&&1===y.length)d(!1),k(null),n(null),x("");else if(m&&32===e.keyCode)r.innerText.split(/\s+/).forEach((function(e){e.startsWith("@")&&k(e),n(null),x("")}));else if(m){if(8===e.keyCode)x(P.slice(0,-1));else if(/^[a-zA-Z0-9_.-]*$/.test(e.key.toLowerCase())&&16!==e.keyCode){var a=e.key;x(P+a)}}t(w.current.innerText)}})}))),$=Object(f.b)((function(e){return{reduXprofile:e.profile}}),(function(e){return{setCurrentPage:function(t){return e(N(t))},setErrorMessage:function(t){return e(D(t))}}}))((function(e){var t=e.setCurrentPage,n=e.setErrorMessage,r=e.reduXprofile,o=e.compose,c=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),o.trim().length>5&&o.trim().length<120?s():n("Error: Text is not the right length");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(d.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y({token:r.token,payload:o.trim()});case 2:"OK"!==(a=e.sent)?n(a):(console.log("Post was created."),t("posts"));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return a.a.createElement("div",{className:"btns"},a.a.createElement("button",{name:"cancel",className:"submit",onClick:function(e){e.preventDefault(),n(null),t("posts")}},"Cancel"),a.a.createElement("button",{type:"submit",name:"submit",className:"submit",onClick:c},"Submit"))})),z=function(e){var t=e.suggested;return a.a.createElement("div",{className:"suggestions"},a.a.createElement("li",null,"Maybe:")," ",t.map((function(e){return a.a.createElement("li",null,e.name)})))},Z=function(e){var t=Object(r.useState)(""),n=Object(u.a)(t,2),o=n[0],c=n[1],s=Object(r.useState)([]),l=Object(u.a)(s,2),i=l[0],f=l[1],p=i&&i.length>0;return a.a.createElement("div",{className:"highlighted-compose"},p?a.a.createElement(z,{compose:o,suggested:i}):"",a.a.createElement(V,{setCompose:c,setSuggested:f}),a.a.createElement($,{compose:o}))},Q=(n(306),Object(f.b)((function(e){return{reduXerrorMessage:e.page.errorMessage}}),(function(e){return{setErrorMessage:function(t){return e(D(t))}}}))((function(e){var t=e.reduXerrorMessage,n=e.setErrorMessage;return t?a.a.createElement("div",{className:"errors",onClick:function(){return n(null)}},t):a.a.createElement("div",null)}))),ee=Object(f.b)((function(e){return{reduXprofile:e.profile,allUsers:e.mongoDb.allUsers,reduXcurrentPage:e.page.currentPage,reduXerrorMessage:e.page.errorMessage}}),(function(e){return{setProfile:function(t){return e(R(t))},setErrorMessage:function(t){return e(D(t))},updateAllPosts:function(){return e(H())},updateAllUsers:function(){return e(function(){var e=Object(d.a)(m.a.mark((function e(t,n){var r,a,o,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:r=e.sent,"string"===typeof requestedPosts&&(console.log("There was a connection error with the DB."),r=[]),a=localStorage.getItem("storediD"),o=localStorage.getItem("storedToken"),a&&(c=r.find((function(e){return e._id===a})),t({type:"ADD_PROFILE",payload:Object(s.a)(Object(s.a)({},c),{},{token:o})})),t({type:"UPDATE_ALL_USERS",payload:r});case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}}}))((function(e){var t,n=e.reduXcurrentPage,o=e.updateAllPosts,c=e.updateAllUsers;switch(Object(r.useEffect)((function(){c(),o()}),[n,o,c]),n){case"log-in":t=a.a.createElement(M,null);break;case"register":t=a.a.createElement(G,null);break;case"compose":t=a.a.createElement(Z,null);break;case"single-page":t=a.a.createElement(Y,null);break;default:t=a.a.createElement(B,null)}return a.a.createElement("div",{className:"global-app"},a.a.createElement(Q,null),a.a.createElement("div",{className:"App"},a.a.createElement("div",{className:"sidebar"},a.a.createElement(X,null)),a.a.createElement("div",{className:"container"},t)))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var te=n(20),ne=n(107),re={allPosts:{},allUsers:{}},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_POSTS":case"UPDATE_ALL_POSTS":return Object(s.a)(Object(s.a)({},e),{},{allPosts:t.payload});case"ADD_USERS":case"UPDATE_ALL_USERS":return Object(s.a)(Object(s.a)({},e),{},{allUsers:t.payload});default:return e}},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PROFILE":return Object(s.a)(Object(s.a)({},e),t.payload);case"REMOVE_PROFILE":return null;default:return e}},ce={currentPage:"posts"},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_PAGE":return Object(s.a)(Object(s.a)({},e),{},{currentPage:t.currentPage});case"SET_ERROR_MESSAGE":return Object(s.a)(Object(s.a)({},e),{},{errorMessage:t.message});case"SET_SEARCH":return Object(s.a)(Object(s.a)({},e),{},{search:t.text});case"SET_SEARCH_RESULTS":return Object(s.a)(Object(s.a)({},e),{},{searchResults:t.payload});case"SET_SINGLE_POST":return Object(s.a)(Object(s.a)({},e),{},{singlePost:t.payload});default:return e}},ue=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||te.d,le=Object(te.e)(Object(te.c)({page:se,profile:oe,mongoDb:ae}),ue(Object(te.a)(ne.a)));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(f.a,{store:le},a.a.createElement(ee,null)),","),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[108,1,2]]]);
//# sourceMappingURL=main.5ba725c7.chunk.js.map